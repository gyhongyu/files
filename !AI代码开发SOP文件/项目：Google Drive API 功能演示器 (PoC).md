### **项目：Google Drive API 功能演示器 (PoC)**

#### **最终成果**

一个公开的网页，用户登录自己的 Google 账户后，可以通过点击页面上的按钮来测试API的各项功能，并能直观地看到返回结果。

#### **技术栈建议**

* **前端:** HTML \+ CSS \+ 原生 JavaScript (Vanilla JS)  
* **后端:** Node.js \+ Express.js

### **完整开发计划**

#### **第一阶段：环境搭建与认证核心**

这是整个项目的基础，也是最关键的一步。请按照以下步骤操作，以准备好运行此演示应用所需的环境。

**1\. 配置 Google Cloud Platform (GCP)**

* **创建项目**：访问 [Google Cloud Console](https://console.cloud.google.com/) 并创建一个新项目（例如，Drive API Demo）。  
* **启用 API**：  
  * 在您的新项目中，导航到 “API 和服务” \> “库”。  
  * 搜索并启用 **Google Drive API**。  
* **配置 OAuth 同意屏幕**：  
  * 导航到 “API 和服务” \> “OAuth 同意屏幕”。  
  * 选择 **外部** 用户类型，然后点击“创建”。  
  * 填写应用名称（例如 My Drive Demo App）、用户支持电子邮件和开发者联系信息。  
  * 在“范围”页面，点击“添加或移除范围”，搜索并添加以下范围：  
    * .../auth/drive (这将授予对用户 Drive 的完全访问权限，以便于演示所有功能)。  
  * 保存并继续，在“测试用户”页面添加您自己的 Google 账户电子邮件地址。  
* **创建凭据**：  
  * 导航到 “API 和服务” \> “凭据”。  
  * 点击 “+ 创建凭据” \> “OAuth 2.0 客户端 ID”。  
  * 应用类型选择 **Web 应用**。  
  * 在 “已获授权的重定向 URI” 部分，点击 “+ 添加 URI”，然后输入 http://localhost:3000/auth/google/callback。  
  * 点击“创建”。您将获得一个 **客户端 ID (Client ID)** 和一个 **客户端密钥 (Client Secret)**。请复制并妥善保管它们。

**2\. 本地项目设置**

* **创建项目文件夹**：在您的电脑上创建一个新文件夹，例如 gdrive-demo。  
* **初始化 Node.js 项目**：在终端中进入该文件夹，并运行 npm init \-y。  
* **安装依赖**：运行以下命令来安装所有必需的库：  
  npm install express googleapis dotenv express-session

**3\. 创建 .env 文件**

在您的项目文件夹中，创建一个名为 .env 的文件。这个文件用于存放您的敏感凭据，**切勿**将此文件上传到 GitHub 等公共仓库。文件内容如下，请将占位符替换为您在步骤1中获取的真实值：

\# Google Cloud Credentials  
GOOGLE\_CLIENT\_ID=你的客户端ID  
GOOGLE\_CLIENT\_SECRET=你的客户端密钥

\# Application Settings  
REDIRECT\_URL=http://localhost:3000/auth/google/callback  
SESSION\_SECRET=这是一个用于加密session的随机字符串请随便输入

**阶段交付成果：** 完成以上配置后，开发环境准备就绪，可以开始编写代码实现认证流程。

#### **第二阶段：文件与文件夹基础操作演示**

在这一阶段，我们将实现最核心的 CRUD (增删改查) 功能。

* **任务规划：**  
  1. **前端界面布局**：创建 HTML 页面，为每个功能（列出、创建、读取、更新、删除）设置按钮和结果显示区。  
  2. **实现后端 API 端点**：为前端的每个功能按钮创建对应的后端路由，用于调用 Drive API。  
  3. **前后端连接**：编写 JavaScript，让前端按钮可以调用后端接口，并将返回的结果显示在页面上。  
* **阶段交付成果：** 一个功能性的测试面板，用户登录后，可以对自己的 Drive 进行基本的文件操作，并实时看到结果。

#### **第三阶段：高级功能演示**

现在我们来添加那些更有趣、更强大的功能。

* **任务规划：**  
  1. **实现搜索功能**：允许用户输入查询语句，后端调用 drive.files.list 的 q 参数进行搜索。  
  2. **实现版本历史**：允许用户输入文件ID，后端调用 drive.revisions.list 返回版本信息。  
  3. **实现权限分享**：允许用户输入文件ID和邮箱，后端调用 drive.permissions.create 来分享文件。  
  4. **实现 Google Doc 导出**：后端先创建 Google Doc，然后调用 drive.files.export 将其导出为纯文本并返回。  
* **阶段交付成果：** 演示页面新增高级功能测试区，可以进行搜索、查看版本、分享文件和导出Doc。

#### **第四阶段：收尾与部署**

* **任务规划：**  
  1. **UI/UX 优化**：添加简单的CSS美化和加载状态提示，并完善错误处理。  
  2. **部署**：将应用部署到 Vercel, Netlify 或 Heroku 等云平台，并配置好环境变量，生成公开访问的URL。  
* **最终交付成果：** 一个任何人都可以访问和测试的在线演示网页，以及一份整理好的源代码。